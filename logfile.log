INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [7485]
INFO:uvicorn.error:Started server process [7536]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [7536]
INFO:uvicorn.error:Started server process [7779]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [7779]
INFO:uvicorn.error:Started server process [7809]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [7809]
INFO:uvicorn.error:Started server process [7839]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [7839]
INFO:uvicorn.error:Started server process [7880]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [7880]
INFO:uvicorn.error:Started server process [21126]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [21126]
INFO:uvicorn.error:Started server process [7]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [7]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [7]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [7]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [7]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [7]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [7]
INFO:uvicorn.error:Started server process [9]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [7]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [7]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [7]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [7]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [7]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [7]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [7]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [7]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [7]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [8]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [7]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [7]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [7]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [7]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [16059]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Uvicorn running on http://0.0.0.0:5000 (Press CTRL+C to quit)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [16059]
INFO:uvicorn.error:Started server process [1]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Uvicorn running on http://0.0.0.0:5000 (Press CTRL+C to quit)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [1]
INFO:uvicorn.error:Started server process [1]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:[Errno 99] error while attempting to bind on address ('::1', 5000, 0, 0): cannot assign requested address
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Started server process [1]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:[Errno 99] error while attempting to bind on address ('0.0.0.1', 5000): cannot assign requested address
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Started server process [1]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Uvicorn running on http://0.0.0.0:5000 (Press CTRL+C to quit)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [1]
INFO:uvicorn.error:Started server process [1]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Uvicorn running on http://0.0.0.0:5000 (Press CTRL+C to quit)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [1]
INFO:uvicorn.error:Started server process [50089]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [10453]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [10453]
INFO:uvicorn.error:Started server process [31776]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [8265]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [8265]
INFO:uvicorn.error:Started server process [10066]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [10066]
INFO:uvicorn.error:Started server process [14841]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [14841]
INFO:uvicorn.error:Started server process [15136]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [15136]
INFO:uvicorn.error:Started server process [15170]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [15170]
INFO:uvicorn.error:Started server process [15264]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [15264]
INFO:uvicorn.error:Started server process [16270]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 209, in app
    response_data = await serialize_response(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 126, in serialize_response
    raise ValidationError(errors, field.type_)
pydantic.error_wrappers.ValidationError: 1 validation error for Token
response
  value is not a valid dict (type=type_error.dict)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [16270]
INFO:uvicorn.error:Started server process [16299]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [16299]
INFO:uvicorn.error:Started server process [17973]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [17973]
INFO:uvicorn.error:Started server process [17994]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [17994]
INFO:uvicorn.error:Started server process [18008]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [18008]
INFO:uvicorn.error:Started server process [18022]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [18022]
INFO:uvicorn.error:Started server process [18040]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [18040]
INFO:uvicorn.error:Started server process [18156]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [18156]
INFO:uvicorn.error:Started server process [18191]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [18191]
INFO:uvicorn.error:Started server process [18721]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [18721]
INFO:uvicorn.error:Started server process [18887]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [18887]
INFO:uvicorn.error:Started server process [21294]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [21294]
INFO:uvicorn.error:Started server process [30385]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [30385]
INFO:uvicorn.error:Started server process [30588]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [30588]
INFO:uvicorn.error:Started server process [30625]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [30625]
INFO:uvicorn.error:Started server process [30646]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [30646]
INFO:uvicorn.error:Started server process [41043]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [41043]
INFO:uvicorn.error:Started server process [42408]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [42408]
INFO:uvicorn.error:Started server process [42550]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [42550]
INFO:uvicorn.error:Started server process [42590]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [42590]
INFO:uvicorn.error:Started server process [42639]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [42639]
INFO:uvicorn.error:Started server process [6495]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [6495]
INFO:uvicorn.error:Started server process [6532]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [6532]
INFO:uvicorn.error:Started server process [6565]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [6565]
INFO:uvicorn.error:Started server process [6699]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [6699]
INFO:uvicorn.error:Started server process [6754]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [6754]
INFO:uvicorn.error:Started server process [6775]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [6775]
INFO:uvicorn.error:Started server process [6794]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [6794]
INFO:uvicorn.error:Started server process [8960]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [8960]
INFO:uvicorn.error:Started server process [8982]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [8982]
INFO:uvicorn.error:Started server process [9015]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [9015]
WARNING:urllib3.connectionpool:Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fad4ee6b6d0>: Failed to establish a new connection: [Errno 111] Connection refused')': /text?location=
WARNING:urllib3.connectionpool:Retrying (Retry(total=3, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fad4ee6b880>: Failed to establish a new connection: [Errno 111] Connection refused')': /text?location=
WARNING:urllib3.connectionpool:Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fad4ee6ba30>: Failed to establish a new connection: [Errno 111] Connection refused')': /text?location=
WARNING:urllib3.connectionpool:Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fad4ee6bbe0>: Failed to establish a new connection: [Errno 111] Connection refused')': /text?location=
WARNING:urllib3.connectionpool:Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fad4ee6bd90>: Failed to establish a new connection: [Errno 111] Connection refused')': /text?location=
INFO:uvicorn.error:Started server process [9047]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [9047]
WARNING:urllib3.connectionpool:Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f1d04fe76d0>: Failed to establish a new connection: [Errno 111] Connection refused')': /text?location=
WARNING:urllib3.connectionpool:Retrying (Retry(total=3, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f1d04fe7880>: Failed to establish a new connection: [Errno 111] Connection refused')': /text?location=
WARNING:urllib3.connectionpool:Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f1d04fe7a30>: Failed to establish a new connection: [Errno 111] Connection refused')': /text?location=
WARNING:urllib3.connectionpool:Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f1d04fe7be0>: Failed to establish a new connection: [Errno 111] Connection refused')': /text?location=
WARNING:urllib3.connectionpool:Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f1d04fe7d90>: Failed to establish a new connection: [Errno 111] Connection refused')': /text?location=
INFO:uvicorn.error:Started server process [9291]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [9291]
INFO:uvicorn.error:Started server process [9366]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [9366]
INFO:uvicorn.error:Started server process [12527]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [12527]
INFO:uvicorn.error:Started server process [12792]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [12792]
INFO:uvicorn.error:Started server process [16191]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [16191]
INFO:uvicorn.error:Started server process [1]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Uvicorn running on http://0.0.0.0:5000 (Press CTRL+C to quit)
INFO:uvicorn.error:Started server process [1]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Uvicorn running on http://0.0.0.0:5000 (Press CTRL+C to quit)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Started server process [1]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Uvicorn running on http://0.0.0.0:5000 (Press CTRL+C to quit)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [1]
INFO:uvicorn.error:Started server process [1]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Uvicorn running on http://127.0.0.1:5000 (Press CTRL+C to quit)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [1]
INFO:uvicorn.error:Started server process [1]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [1]
INFO:uvicorn.error:Started server process [1]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:uvicorn.error:Started server process [1]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [1]
INFO:uvicorn.error:Started server process [7]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [45745]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [45745]
INFO:uvicorn.error:Started server process [9]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [7]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [7]
INFO:uvicorn.error:Started server process [9]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [7]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [7]
INFO:uvicorn.error:Started server process [12]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [12]
INFO:uvicorn.error:Started server process [14]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [14]
INFO:uvicorn.error:Started server process [16]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [7]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [7]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [50761]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [50761]
INFO:uvicorn.error:Started server process [51178]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [51178]
INFO:uvicorn.error:Started server process [51202]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [51202]
INFO:uvicorn.error:Started server process [51632]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [51632]
INFO:uvicorn.error:Started server process [51647]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [51647]
INFO:uvicorn.error:Started server process [51675]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [51675]
INFO:uvicorn.error:Started server process [51736]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [51736]
INFO:uvicorn.error:Started server process [51758]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [51758]
INFO:uvicorn.error:Started server process [51777]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [51777]
INFO:uvicorn.error:Started server process [51802]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 94, in rooms
    rooms = await get_rooms()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/controllers.py", line 56, in get_rooms
    row_list.append(RoomInDB(**row))
  File "pydantic/main.py", line 362, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for RoomInDB
members -> 0 -> age
  field required (type=value_error.missing)
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 94, in rooms
    rooms = await get_rooms()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/controllers.py", line 56, in get_rooms
    row_list.append(RoomInDB(**row))
  File "pydantic/main.py", line 362, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for RoomInDB
members -> 0 -> age
  field required (type=value_error.missing)
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 94, in rooms
    rooms = await get_rooms()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/controllers.py", line 56, in get_rooms
    row_list.append(RoomInDB(**row))
  File "pydantic/main.py", line 362, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for RoomInDB
members -> 0 -> age
  field required (type=value_error.missing)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [51802]
INFO:uvicorn.error:Started server process [54107]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [54107]
INFO:uvicorn.error:Started server process [54142]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [6397]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [6397]
INFO:uvicorn.error:Started server process [6518]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [6518]
INFO:uvicorn.error:Started server process [6702]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 94, in rooms
    rooms = await get_rooms()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/controllers.py", line 56, in get_rooms
    row_list.append(RoomInDB(**row))
  File "pydantic/main.py", line 362, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for RoomInDB
members -> 0 -> age
  field required (type=value_error.missing)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [6702]
INFO:uvicorn.error:Started server process [7350]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 94, in rooms
    rooms = await get_rooms()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/controllers.py", line 57, in get_rooms
    row_list.append(RoomInDB(**row))
  File "pydantic/main.py", line 362, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for RoomInDB
members -> 0 -> age
  field required (type=value_error.missing)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [7350]
INFO:uvicorn.error:Started server process [7448]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [7448]
INFO:uvicorn.error:Started server process [7459]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [7459]
INFO:uvicorn.error:Started server process [7503]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 209, in app
    response_data = await serialize_response(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 137, in serialize_response
    return jsonable_encoder(response_content)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/encoders.py", line 104, in jsonable_encoder
    jsonable_encoder(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/encoders.py", line 90, in jsonable_encoder
    encoded_value = jsonable_encoder(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/encoders.py", line 141, in jsonable_encoder
    raise ValueError(errors)
ValueError: [TypeError("'ObjectId' object is not iterable"), TypeError('vars() argument must have __dict__ attribute')]
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [7503]
INFO:uvicorn.error:Started server process [7654]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [7654]
INFO:uvicorn.error:Started server process [7700]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 94, in rooms
    rooms = await get_rooms()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/controllers.py", line 57, in get_rooms
    row_list.append(RoomInDB(**row))
  File "pydantic/main.py", line 362, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for RoomInDB
members -> 0 -> age
  field required (type=value_error.missing)
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 94, in rooms
    rooms = await get_rooms()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/controllers.py", line 57, in get_rooms
    row_list.append(RoomInDB(**row))
  File "pydantic/main.py", line 362, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 22 validation errors for RoomInDB
members -> 0 -> age
  field required (type=value_error.missing)
messages -> 0
  value is not a valid dict (type=type_error.dict)
messages -> 1
  value is not a valid dict (type=type_error.dict)
messages -> 2
  value is not a valid dict (type=type_error.dict)
messages -> 3
  value is not a valid dict (type=type_error.dict)
messages -> 4
  value is not a valid dict (type=type_error.dict)
messages -> 5
  value is not a valid dict (type=type_error.dict)
messages -> 6
  value is not a valid dict (type=type_error.dict)
messages -> 7
  value is not a valid dict (type=type_error.dict)
messages -> 8 -> user
  field required (type=value_error.missing)
messages -> 9
  value is not a valid dict (type=type_error.dict)
messages -> 10
  value is not a valid dict (type=type_error.dict)
messages -> 11
  value is not a valid dict (type=type_error.dict)
messages -> 12
  value is not a valid dict (type=type_error.dict)
messages -> 13
  value is not a valid dict (type=type_error.dict)
messages -> 14
  value is not a valid dict (type=type_error.dict)
messages -> 15
  value is not a valid dict (type=type_error.dict)
messages -> 16
  value is not a valid dict (type=type_error.dict)
messages -> 17
  value is not a valid dict (type=type_error.dict)
messages -> 18
  value is not a valid dict (type=type_error.dict)
messages -> 19
  value is not a valid dict (type=type_error.dict)
messages -> 20
  value is not a valid dict (type=type_error.dict)
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 86, in create_room
    res = await insert_room(request.uid, request.room_name, rooms_collection)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/controllers.py", line 38, in insert_room
    dbroom = RoomInDB(**room)
  File "pydantic/main.py", line 362, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for RoomInDB
members -> 0 -> age
  field required (type=value_error.missing)
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 86, in create_room
    res = await insert_room(request.uid, request.room_name, rooms_collection)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/controllers.py", line 38, in insert_room
    dbroom = RoomInDB(**room)
  File "pydantic/main.py", line 362, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for RoomInDB
members -> 0 -> age
  field required (type=value_error.missing)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [7700]
INFO:uvicorn.error:Started server process [9209]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 86, in create_room
    res = await insert_room(request.uid, request.room_name, rooms_collection)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/controllers.py", line 38, in insert_room
    dbroom = RoomInDB(**room)
  File "pydantic/main.py", line 391, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for RoomInDB
members -> 0 -> age
  field required (type=value_error.missing)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [9209]
INFO:uvicorn.error:Started server process [9253]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [9253]
INFO:uvicorn.error:Started server process [9258]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 86, in create_room
    res = await insert_room(request.uid, request.room_name, rooms_collection)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/controllers.py", line 38, in insert_room
    dbroom = RoomInDB(**room)
  File "pydantic/main.py", line 391, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for RoomInDB
members -> 0 -> age
  field required (type=value_error.missing)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [9258]
INFO:uvicorn.error:Started server process [9871]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 86, in create_room
    res = await insert_room(request.uid, request.room_name, rooms_collection)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/controllers.py", line 38, in insert_room
    dbroom = RoomInDB(**room)
  File "pydantic/main.py", line 362, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for RoomInDB
members -> 0 -> age
  field required (type=value_error.missing)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [9871]
INFO:uvicorn.error:Started server process [10098]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 87, in create_room
    logging.info(f"CREATE_ROOM: request.username: {request.username}, room_name: {request.room_name}")
AttributeError: 'RoomCreateRequest' object has no attribute 'username'
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [10098]
INFO:uvicorn.error:Started server process [10167]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [10167]
INFO:uvicorn.error:Started server process [11205]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [11205]
INFO:uvicorn.error:Started server process [11228]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [11228]
INFO:uvicorn.error:Started server process [11238]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 93, in rooms
    if row is not None:
NameError: name 'row' is not defined
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [11238]
INFO:uvicorn.error:Started server process [11273]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 94, in rooms
    user = RoomInDB(**current_user)
  File "pydantic/main.py", line 362, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for RoomInDB
room_name
  field required (type=value_error.missing)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [11273]
INFO:uvicorn.error:Started server process [11409]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [11409]
INFO:uvicorn.error:Started server process [11422]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [11422]
INFO:uvicorn.error:Started server process [11440]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [11440]
INFO:uvicorn.error:Started server process [11478]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [11478]
INFO:uvicorn.error:Started server process [11511]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [11511]
INFO:uvicorn.error:Started server process [11518]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [11518]
INFO:uvicorn.error:Started server process [11907]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [11907]
INFO:uvicorn.error:Started server process [11948]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [11948]
INFO:uvicorn.error:Started server process [12002]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 99, in rooms
    print('i', i.get('members'))
AttributeError: 'RoomInDB' object has no attribute 'get'
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [12002]
INFO:uvicorn.error:Started server process [12047]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [12047]
INFO:uvicorn.error:Started server process [12079]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [12079]
INFO:uvicorn.error:Started server process [12117]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [12117]
INFO:uvicorn.error:Started server process [12207]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [12207]
INFO:uvicorn.error:Started server process [12224]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 96, in rooms
    print("current_user-ID", current_user._id)
AttributeError: 'dict' object has no attribute '_id'
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [12224]
INFO:uvicorn.error:Started server process [12470]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [12470]
INFO:uvicorn.error:Started server process [12513]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 96, in rooms
    print("current_user-ID", current_user[0])
KeyError: 0
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [12513]
INFO:uvicorn.error:Started server process [12552]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [12552]
INFO:uvicorn.error:Started server process [12595]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [12595]
INFO:uvicorn.error:Started server process [13253]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [13253]
INFO:uvicorn.error:Started server process [14525]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [14525]
INFO:uvicorn.error:Started server process [15692]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [15692]
INFO:uvicorn.error:Started server process [15759]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 86, in create_room
    res = await insert_room(request.uid, request.room_name, rooms_collection)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/controllers.py", line 39, in insert_room
    dbroom = RoomInDB(**room)
  File "pydantic/main.py", line 362, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 4 validation errors for RoomInDB
members -> 0 -> first_name
  field required (type=value_error.missing)
members -> 0 -> last_name
  field required (type=value_error.missing)
members -> 0 -> username
  field required (type=value_error.missing)
members -> 0 -> password
  field required (type=value_error.missing)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [15759]
INFO:uvicorn.error:Started server process [15818]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [15818]
INFO:uvicorn.error:Started server process [15925]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [15925]
INFO:uvicorn.error:Started server process [15969]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [15969]
INFO:uvicorn.error:Started server process [15982]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [15982]
INFO:uvicorn.error:Started server process [16052]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [16052]
INFO:uvicorn.error:Started server process [16110]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 88, in create_room
    res = await insert_room(request.uid, request.room_name, rooms_collection)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/controllers.py", line 40, in insert_room
    dbroom = RoomInDB(**room)
  File "pydantic/main.py", line 362, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 4 validation errors for RoomInDB
members -> 0 -> first_name
  field required (type=value_error.missing)
members -> 0 -> last_name
  field required (type=value_error.missing)
members -> 0 -> username
  field required (type=value_error.missing)
members -> 0 -> password
  field required (type=value_error.missing)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [16110]
INFO:uvicorn.error:Started server process [16190]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 88, in create_room
    res = await insert_room(request.uid, request.room_name, rooms_collection)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/controllers.py", line 38, in insert_room
    room["members"] = [user.upgrage({'_id': user_id})] if user is not None else []
AttributeError: 'dict' object has no attribute 'upgrage'
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [16190]
INFO:uvicorn.error:Started server process [16249]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 88, in create_room
    res = await insert_room(request.uid, request.room_name, rooms_collection)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/controllers.py", line 40, in insert_room
    dbroom = RoomInDB(**room)
  File "pydantic/main.py", line 362, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for RoomInDB
members -> 0
  none is not an allowed value (type=type_error.none.not_allowed)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [16249]
INFO:uvicorn.error:Started server process [16308]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 88, in create_room
    res = await insert_room(request.uid, request.room_name, rooms_collection)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/controllers.py", line 37, in insert_room
    print('room_user', user.get('_id').update({'_id': user_id}))
AttributeError: 'str' object has no attribute 'update'
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [16308]
INFO:uvicorn.error:Started server process [16358]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [16358]
INFO:uvicorn.error:Started server process [16396]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [16396]
INFO:uvicorn.error:Started server process [16441]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [16441]
INFO:uvicorn.error:Started server process [16600]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [16600]
INFO:uvicorn.error:Started server process [16635]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [16635]
INFO:uvicorn.error:Started server process [16753]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [16753]
INFO:uvicorn.error:Started server process [16808]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [16808]
INFO:uvicorn.error:Started server process [16831]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [16831]
INFO:uvicorn.error:Started server process [16847]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [16847]
INFO:uvicorn.error:Started server process [16909]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [16909]
INFO:uvicorn.error:Started server process [16969]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [16969]
INFO:uvicorn.error:Started server process [16994]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [16994]
INFO:uvicorn.error:Started server process [17036]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [17036]
INFO:uvicorn.error:Started server process [17118]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [17118]
INFO:uvicorn.error:Started server process [17128]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [17128]
INFO:uvicorn.error:Started server process [17136]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [17136]
INFO:uvicorn.error:Started server process [17362]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [17362]
INFO:uvicorn.error:Started server process [17394]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 88, in create_room
    res = await insert_room(request.uid, request.room_name, rooms_collection)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/controllers.py", line 41, in insert_room
    print('pasha', v)
NameError: name 'v' is not defined
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [17394]
INFO:uvicorn.error:Started server process [17440]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [17440]
INFO:uvicorn.error:Started server process [17467]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [17467]
INFO:uvicorn.error:Started server process [17485]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [17485]
INFO:uvicorn.error:Started server process [17680]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [17680]
INFO:uvicorn.error:Started server process [17803]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [17803]
INFO:uvicorn.error:Started server process [18019]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [18019]
INFO:uvicorn.error:Started server process [18082]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [18082]
INFO:uvicorn.error:Started server process [18153]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [18153]
INFO:uvicorn.error:Started server process [18218]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [18218]
INFO:uvicorn.error:Started server process [18306]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [18306]
INFO:uvicorn.error:Started server process [18365]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [18365]
INFO:uvicorn.error:Started server process [18408]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 88, in create_room
    res = await insert_room(request.uid, request.room_name, rooms_collection)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/controllers.py", line 48, in insert_room
    print( dbroom.members._id )
AttributeError: 'list' object has no attribute '_id'
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [18408]
INFO:uvicorn.error:Started server process [18453]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [18453]
INFO:uvicorn.error:Started server process [18486]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [18486]
INFO:uvicorn.error:Started server process [18545]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [18545]
INFO:uvicorn.error:Started server process [18582]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [18582]
INFO:uvicorn.error:Started server process [18865]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [18865]
INFO:uvicorn.error:Started server process [19037]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [19037]
INFO:uvicorn.error:Started server process [19142]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [19142]
INFO:uvicorn.error:Started server process [19159]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [19159]
INFO:uvicorn.error:Started server process [19447]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [19447]
INFO:uvicorn.error:Started server process [22018]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 88, in create_room
    res = await insert_room(request.uid, request.room_name, rooms_collection)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/controllers.py", line 46, in insert_room
    dbroom = RoomInDB(**room)
  File "pydantic/main.py", line 362, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for RoomInDB
members -> 0 -> password
  field required (type=value_error.missing)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [22018]
INFO:uvicorn.error:Started server process [22491]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [22491]
INFO:uvicorn.error:Started server process [22525]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 88, in create_room
    res = await insert_room(request.uid, request.room_name, rooms_collection)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/controllers.py", line 46, in insert_room
    dbroom = RoomInDB(**room)
  File "pydantic/main.py", line 362, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for RoomInDB
members -> 0 -> password
  field required (type=value_error.missing)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [22525]
INFO:uvicorn.error:Started server process [22826]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [22826]
INFO:uvicorn.error:Started server process [3895]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [3895]
INFO:uvicorn.error:Started server process [4006]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [4006]
INFO:uvicorn.error:Started server process [4018]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [4018]
INFO:uvicorn.error:Started server process [4365]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [4365]
INFO:uvicorn.error:Started server process [4929]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [4929]
INFO:uvicorn.error:Started server process [4995]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [4995]
INFO:uvicorn.error:Started server process [5012]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [5012]
INFO:uvicorn.error:Started server process [5024]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [5024]
INFO:uvicorn.error:Started server process [5079]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [5079]
INFO:uvicorn.error:Started server process [5101]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [5101]
INFO:uvicorn.error:Started server process [5116]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [5116]
INFO:uvicorn.error:Started server process [5153]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [5153]
INFO:uvicorn.error:Started server process [5214]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 88, in create_room
    res = await insert_room(request.uid, request.room_name, rooms_collection)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/controllers.py", line 36, in insert_room
    user_id = user.get('_id')
AttributeError: 'NoneType' object has no attribute 'get'
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [5214]
INFO:uvicorn.error:Started server process [5336]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [5336]
INFO:uvicorn.error:Started server process [7889]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [7889]
INFO:uvicorn.error:Started server process [10840]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [10840]
INFO:uvicorn.error:Started server process [11103]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [11103]
INFO:uvicorn.error:Started server process [11106]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [11106]
INFO:uvicorn.error:Started server process [11171]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [11171]
INFO:uvicorn.error:Started server process [11194]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [11194]
INFO:uvicorn.error:Started server process [18794]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [18794]
INFO:uvicorn.error:Started server process [27271]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [27271]
INFO:uvicorn.error:Started server process [27468]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 86, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 142, in simple_response
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 191, in app
    solved_result = await solve_dependencies(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/dependencies/utils.py", line 576, in solve_dependencies
    ) = await request_body_to_args(  # body_params checked above
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/dependencies/utils.py", line 702, in request_body_to_args
    v_, errors_ = field.validate(value, values, loc=loc)
  File "pydantic/fields.py", line 579, in pydantic.fields.ModelField.validate
  File "pydantic/fields.py", line 738, in pydantic.fields.ModelField._validate_singleton
  File "pydantic/fields.py", line 745, in pydantic.fields.ModelField._apply_validators
  File "pydantic/class_validators.py", line 310, in pydantic.class_validators._generic_validator_basic.lambda12
  File "pydantic/main.py", line 663, in pydantic.main.BaseModel.validate
  File "pydantic/main.py", line 360, in pydantic.main.BaseModel.__init__
  File "pydantic/main.py", line 960, in pydantic.main.validate_model
pydantic.errors.ConfigError: field "rooms" not yet prepared so type is still a ForwardRef, you might need to call User.update_forward_refs().
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [27468]
INFO:uvicorn.error:Started server process [27756]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 152, in openapi
    return JSONResponse(self.openapi())
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 130, in openapi
    self.openapi_schema = get_openapi(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/openapi/utils.py", line 354, in get_openapi
    definitions = get_model_definitions(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/utils.py", line 24, in get_model_definitions
    m_schema, m_definitions, m_nested_models = model_process_schema(
  File "pydantic/schema.py", line 525, in pydantic.schema.model_process_schema
  File "pydantic/schema.py", line 566, in pydantic.schema.model_type_schema
  File "pydantic/schema.py", line 222, in pydantic.schema.field_schema
  File "pydantic/schema.py", line 476, in pydantic.schema.field_type_schema
  File "pydantic/schema.py", line 802, in pydantic.schema.field_singleton_schema
  File "/usr/lib/python3.8/abc.py", line 102, in __subclasscheck__
    return _abc_subclasscheck(cls, subclass)
TypeError: issubclass() arg 1 must be a class
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [27756]
INFO:uvicorn.error:Started server process [27845]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 152, in openapi
    return JSONResponse(self.openapi())
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 130, in openapi
    self.openapi_schema = get_openapi(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/openapi/utils.py", line 354, in get_openapi
    definitions = get_model_definitions(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/utils.py", line 24, in get_model_definitions
    m_schema, m_definitions, m_nested_models = model_process_schema(
  File "pydantic/schema.py", line 525, in pydantic.schema.model_process_schema
  File "pydantic/schema.py", line 566, in pydantic.schema.model_type_schema
  File "pydantic/schema.py", line 222, in pydantic.schema.field_schema
  File "pydantic/schema.py", line 476, in pydantic.schema.field_type_schema
  File "pydantic/schema.py", line 802, in pydantic.schema.field_singleton_schema
  File "/usr/lib/python3.8/abc.py", line 102, in __subclasscheck__
    return _abc_subclasscheck(cls, subclass)
TypeError: issubclass() arg 1 must be a class
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [27845]
INFO:uvicorn.error:Started server process [27922]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [27922]
INFO:uvicorn.error:Started server process [28022]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [28022]
INFO:uvicorn.error:Started server process [28083]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [28083]
INFO:uvicorn.error:Started server process [28362]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [28362]
INFO:uvicorn.error:Started server process [28554]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [28554]
INFO:uvicorn.error:Started server process [28571]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 152, in openapi
    return JSONResponse(self.openapi())
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 130, in openapi
    self.openapi_schema = get_openapi(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/openapi/utils.py", line 354, in get_openapi
    definitions = get_model_definitions(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/utils.py", line 24, in get_model_definitions
    m_schema, m_definitions, m_nested_models = model_process_schema(
  File "pydantic/schema.py", line 525, in pydantic.schema.model_process_schema
  File "pydantic/schema.py", line 566, in pydantic.schema.model_type_schema
  File "pydantic/schema.py", line 222, in pydantic.schema.field_schema
  File "pydantic/schema.py", line 476, in pydantic.schema.field_type_schema
  File "pydantic/schema.py", line 802, in pydantic.schema.field_singleton_schema
  File "/usr/lib/python3.8/abc.py", line 102, in __subclasscheck__
    return _abc_subclasscheck(cls, subclass)
TypeError: issubclass() arg 1 must be a class
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [28571]
INFO:uvicorn.error:Started server process [28859]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 100, in rooms
    rooms = await get_rooms()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/controllers.py", line 68, in get_rooms
    row_list.append(RoomInDB(**row))
  File "pydantic/main.py", line 362, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for RoomInDB
_id
  extra fields not permitted (type=value_error.extra)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [28859]
INFO:uvicorn.error:Started server process [30762]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [30762]
INFO:uvicorn.error:Started server process [30766]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 113, in list_room
    rooms = await get_rooms()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/controllers.py", line 68, in get_rooms
    row_list.append(RoomInDB(**row))
  File "pydantic/main.py", line 362, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for RoomInDB
_id
  extra fields not permitted (type=value_error.extra)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [30766]
INFO:uvicorn.error:Started server process [30980]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [30980]
INFO:uvicorn.error:Started server process [30994]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 113, in list_room
    rooms = await get_rooms()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/controllers.py", line 68, in get_rooms
    row_list.append(RoomInDB(**row))
  File "pydantic/main.py", line 362, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for RoomInDB
_id
  extra fields not permitted (type=value_error.extra)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [30994]
INFO:uvicorn.error:Started server process [31014]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [31014]
INFO:uvicorn.error:Started server process [31030]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [31030]
INFO:uvicorn.error:Started server process [31063]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 113, in list_room
    rooms = await get_rooms()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/controllers.py", line 69, in get_rooms
    row_list.append(RoomInDB(**row))
  File "pydantic/main.py", line 362, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for RoomInDB
_id
  extra fields not permitted (type=value_error.extra)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [31063]
INFO:uvicorn.error:Started server process [31127]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 113, in list_room
    rooms = await get_rooms()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/controllers.py", line 70, in get_rooms
    row_list.append(RoomInDB(**row))
  File "pydantic/main.py", line 362, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for RoomInDB
_id
  extra fields not permitted (type=value_error.extra)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [31127]
INFO:uvicorn.error:Started server process [32367]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 113, in list_room
    rooms = await get_rooms()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/controllers.py", line 70, in get_rooms
    row_list.append(RoomInDB(**row))
  File "pydantic/main.py", line 362, in pydantic.main.BaseModel.__init__
pydantic.error_wrappers.ValidationError: 1 validation error for RoomInDB
_id
  extra fields not permitted (type=value_error.extra)
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [32367]
INFO:uvicorn.error:Started server process [32446]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [32446]
INFO:uvicorn.error:Started server process [32489]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [32489]
INFO:uvicorn.error:Started server process [32497]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 106, in rooms
    print('username', j.get('username'))
AttributeError: 'User' object has no attribute 'get'
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [32497]
INFO:uvicorn.error:Started server process [32851]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [32851]
INFO:uvicorn.error:Started server process [32924]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 106, in rooms
    print('username', j.username == user.username)
AttributeError: 'dict' object has no attribute 'username'
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [32924]
INFO:uvicorn.error:Started server process [32971]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [32971]
INFO:uvicorn.error:Started server process [33037]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [33037]
INFO:uvicorn.error:Started server process [33069]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [33069]
INFO:uvicorn.error:Started server process [33093]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [33093]
INFO:uvicorn.error:Started server process [33538]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [33538]
INFO:uvicorn.error:Started server process [33553]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [33553]
INFO:uvicorn.error:Started server process [33568]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [33568]
INFO:uvicorn.error:Started server process [33584]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [33584]
INFO:uvicorn.error:Started server process [33648]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [33648]
INFO:uvicorn.error:Started server process [33663]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [33663]
INFO:uvicorn.error:Started server process [34035]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [34035]
INFO:uvicorn.error:Started server process [34050]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [34050]
INFO:uvicorn.error:Started server process [34068]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [34068]
INFO:uvicorn.error:Started server process [34092]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [34092]
INFO:uvicorn.error:Started server process [34110]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [34110]
INFO:uvicorn.error:Started server process [34144]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [34144]
INFO:uvicorn.error:Started server process [34527]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [34527]
INFO:uvicorn.error:Started server process [34549]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [34549]
INFO:uvicorn.error:Started server process [35185]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [35185]
INFO:uvicorn.error:Started server process [35197]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [35197]
INFO:uvicorn.error:Started server process [35210]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [35210]
INFO:uvicorn.error:Started server process [35247]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [35247]
INFO:uvicorn.error:Started server process [35258]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 99, in rooms
    list_room = [list_room.append(i) for j in i.members if j.username == user.get('username')]
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 99, in <listcomp>
    list_room = [list_room.append(i) for j in i.members if j.username == user.get('username')]
NameError: free variable 'list_room' referenced before assignment in enclosing scope
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [35258]
INFO:uvicorn.error:Started server process [35288]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [35288]
INFO:uvicorn.error:Started server process [35301]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 99, in rooms
    list_room = [list_room.append(i) for j in i.members if j.username == user.get('username')]
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 99, in <listcomp>
    list_room = [list_room.append(i) for j in i.members if j.username == user.get('username')]
NameError: free variable 'list_room' referenced before assignment in enclosing scope
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [35301]
INFO:uvicorn.error:Started server process [35316]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [35316]
INFO:uvicorn.error:Started server process [35369]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [35369]
INFO:uvicorn.error:Started server process [35386]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [35386]
INFO:uvicorn.error:Started server process [35411]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [35411]
INFO:uvicorn.error:Started server process [38733]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [38733]
INFO:uvicorn.error:Started server process [40292]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [40292]
INFO:uvicorn.error:Started server process [40466]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [40466]
INFO:uvicorn.error:Started server process [40494]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [40494]
INFO:uvicorn.error:Started server process [40524]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [40524]
INFO:uvicorn.error:Started server process [40543]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [40543]
INFO:uvicorn.error:Started server process [40554]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 98, in rooms
    list_room = [i for j in i.members if j.username == user.get('username') for i in rooms ]
NameError: name 'i' is not defined
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [40554]
INFO:uvicorn.error:Started server process [40572]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [40572]
INFO:uvicorn.error:Started server process [40598]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [40598]
INFO:uvicorn.error:Started server process [40630]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [40630]
INFO:uvicorn.error:Started server process [40678]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [40678]
INFO:uvicorn.error:Started server process [40716]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [40716]
INFO:uvicorn.error:Started server process [40722]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [40722]
INFO:uvicorn.error:Started server process [40761]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [40761]
INFO:uvicorn.error:Started server process [42024]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [42024]
INFO:uvicorn.error:Started server process [42087]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [42087]
INFO:uvicorn.error:Started server process [42102]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [42102]
INFO:uvicorn.error:Started server process [42289]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [42289]
INFO:uvicorn.error:Started server process [12364]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [12364]
INFO:uvicorn.error:Started server process [12466]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [12466]
INFO:uvicorn.error:Started server process [13308]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [13308]
INFO:uvicorn.error:Started server process [13320]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 98, in rooms
    list_room = [ [i for j in i.members if j.username == user.get('username')] for i in rooms_collection]
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 98, in <listcomp>
    list_room = [ [i for j in i.members if j.username == user.get('username')] for i in rooms_collection]
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/motor/core.py", line 757, in __getitem__
    return collection_class(self.database, self.name + '.' + name,
TypeError: can only concatenate str (not "int") to str
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 98, in rooms
    list_room = [ [i for j in i.members if j.username == user.get('username')] for i in rooms_collection]
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 98, in <listcomp>
    list_room = [ [i for j in i.members if j.username == user.get('username')] for i in rooms_collection]
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/motor/core.py", line 757, in __getitem__
    return collection_class(self.database, self.name + '.' + name,
TypeError: can only concatenate str (not "int") to str
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [13320]
INFO:uvicorn.error:Started server process [14177]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 98, in rooms
    list_room = [ [i for j in i.members if j.username == user.get('username')] for i in rooms_collection]
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 98, in <listcomp>
    list_room = [ [i for j in i.members if j.username == user.get('username')] for i in rooms_collection]
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/motor/core.py", line 757, in __getitem__
    return collection_class(self.database, self.name + '.' + name,
TypeError: can only concatenate str (not "int") to str
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [14177]
INFO:uvicorn.error:Started server process [14209]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [14209]
INFO:uvicorn.error:Started server process [20101]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [20101]
INFO:uvicorn.error:Started server process [20297]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [20297]
INFO:uvicorn.error:Started server process [20313]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [20313]
INFO:uvicorn.error:Started server process [20331]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [20331]
INFO:uvicorn.error:Started server process [20388]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 394, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 81, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 78, in __call__
    await self.app(scope, receive, inner_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 78, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc from None
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 227, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 41, in app
    response = await func(request)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 201, in app
    raw_response = await run_endpoint_function(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 148, in run_endpoint_function
    return await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 98, in rooms
    list_room = [ lambda i:i for j in i.members if j.username == user.get('username') for i in rooms]
UnboundLocalError: local variable 'i' referenced before assignment
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [20388]
INFO:uvicorn.error:Started server process [20713]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [20713]
INFO:uvicorn.error:Started server process [20780]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [20780]
INFO:uvicorn.error:Started server process [20815]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [20815]
INFO:uvicorn.error:Started server process [20857]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [20857]
INFO:uvicorn.error:Started server process [20879]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [20879]
INFO:uvicorn.error:Started server process [20907]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [20907]
INFO:uvicorn.error:Started server process [20950]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [20950]
INFO:uvicorn.error:Started server process [21299]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [21299]
INFO:uvicorn.error:Started server process [21320]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [21320]
INFO:uvicorn.error:Started server process [21336]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [21336]
INFO:uvicorn.error:Started server process [21692]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [21692]
INFO:uvicorn.error:Started server process [21708]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [21708]
INFO:uvicorn.error:Started server process [21722]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [21722]
INFO:uvicorn.error:Started server process [21734]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [21734]
INFO:uvicorn.error:Started server process [23023]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [23023]
INFO:uvicorn.error:Started server process [23073]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [23073]
INFO:uvicorn.error:Started server process [39164]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [39164]
INFO:uvicorn.error:Started server process [41724]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [41724]
INFO:uvicorn.error:Started server process [41759]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [41759]
INFO:uvicorn.error:Started server process [41815]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [41815]
INFO:uvicorn.error:Started server process [41829]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [41829]
INFO:uvicorn.error:Started server process [41846]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [41846]
INFO:uvicorn.error:Started server process [41874]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [41874]
INFO:uvicorn.error:Started server process [41900]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [41900]
INFO:uvicorn.error:Started server process [42246]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [42246]
INFO:uvicorn.error:Started server process [9586]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:('127.0.0.1', 48496) - "WebSocket /v1/chat/ws/1614960048856" [accepted]
INFO:uvicorn.error:('127.0.0.1', 48502) - "WebSocket /v1/chat/ws/1614960048859" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50476) - "WebSocket /v1/chat/ws/1614969464525" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50484) - "WebSocket /v1/chat/ws/1614969464526" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50496) - "WebSocket /v1/chat/ws/1614969465668" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50500) - "WebSocket /v1/chat/ws/1614969465673" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 50510) - "WebSocket /v1/chat/ws/1614969469745" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50514) - "WebSocket /v1/chat/ws/1614969469751" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50518) - "WebSocket /v1/chat/ws/1614969469973" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50522) - "WebSocket /v1/chat/ws/1614969469980" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 50538) - "WebSocket /v1/chat/ws/1614969472313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50542) - "WebSocket /v1/chat/ws/1614969472314" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50546) - "WebSocket /v1/chat/ws/1614969472397" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50550) - "WebSocket /v1/chat/ws/1614969472399" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 50570) - "WebSocket /v1/chat/ws/1614969480825" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50576) - "WebSocket /v1/chat/ws/1614969480827" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50580) - "WebSocket /v1/chat/ws/1614969480914" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50584) - "WebSocket /v1/chat/ws/1614969480919" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 50598) - "WebSocket /v1/chat/ws/1614969484239" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50602) - "WebSocket /v1/chat/ws/1614969484249" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50606) - "WebSocket /v1/chat/ws/1614969484441" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50610) - "WebSocket /v1/chat/ws/1614969484454" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 50630) - "WebSocket /v1/chat/ws/1614969486409" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50634) - "WebSocket /v1/chat/ws/1614969486410" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50638) - "WebSocket /v1/chat/ws/1614969486551" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50642) - "WebSocket /v1/chat/ws/1614969486568" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50650) - "WebSocket /v1/chat/ws/1614969503699" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50656) - "WebSocket /v1/chat/ws/1614969503702" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 53358) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 53364) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 53368) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 53372) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 53472) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 53476) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 53490) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 53494) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 53530) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 53536) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 53548) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 53556) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 53946) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 53950) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 53956) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 53960) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 54980) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 54984) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 54998) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 55002) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 57172) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 57178) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 57182) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 57186) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 57262) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 57268) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 57272) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 57276) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 57956) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 57962) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 57966) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 57978) - "WebSocket /v1/chat/ws/kirill" 403
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 245, in app
    raise WebSocketRequestValidationError(errors)
fastapi.exceptions.WebSocketRequestValidationError: 1 validation error for WebSocket
path -> client_id
  value is not a valid integer (type=type_error.integer)
INFO:uvicorn.error:('127.0.0.1', 58320) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 58324) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 58330) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 58334) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 43632) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 43636) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 43640) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 43644) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 43704) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 43708) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 43714) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 43718) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 43868) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 43872) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 43886) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 43890) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 43988) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 43992) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 43998) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 44002) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 44104) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 44108) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 44114) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 44118) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 44214) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 44218) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 44232) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 44236) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 32932) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 32940) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 32968) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 32974) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 32978) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 32982) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 32990) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 32994) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33000) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33004) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33030) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33036) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33040) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33044) - "WebSocket /v1/chat/ws/19429491241294219" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33252) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33256) - "WebSocket /v1/chat/ws/4214214213" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 33296) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33306) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33310) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33314) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33414) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33418) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33422) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33426) - "WebSocket /v1/chat/ws/4214214213" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 33444) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33448) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33452) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33456) - "WebSocket /v1/chat/ws/4214214213" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 33476) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33480) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33486) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33490) - "WebSocket /v1/chat/ws/4214214213" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
INFO:uvicorn.error:('127.0.0.1', 33512) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33516) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33520) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33524) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34456) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34460) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34474) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34478) - "WebSocket /v1/chat/ws/4214214213" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 34512) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34516) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34520) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34524) - "WebSocket /v1/chat/ws/4214214213" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 34536) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34540) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34544) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34548) - "WebSocket /v1/chat/ws/4214214213" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 982, in read_data_frame
    await self.write_close_frame(frame.data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1101, in write_close_frame
    await self.write_frame(True, OP_CLOSE, data, _expected_state=State.CLOSING)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1075, in write_frame
    async with self._drain_lock:
  File "/usr/lib/python3.8/asyncio/locks.py", line 97, in __aenter__
    await self.acquire()
  File "/usr/lib/python3.8/asyncio/locks.py", line 203, in acquire
    await fut
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 34560) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34564) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34568) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34572) - "WebSocket /v1/chat/ws/4214214213" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 34586) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34590) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34594) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34598) - "WebSocket /v1/chat/ws/4214214213" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 34622) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34628) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34632) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34636) - "WebSocket /v1/chat/ws/4214214213" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 34650) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34654) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34658) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34662) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34678) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34682) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34686) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34690) - "WebSocket /v1/chat/ws/4214214213" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 34706) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34710) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34714) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34718) - "WebSocket /v1/chat/ws/4214214213" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 34730) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34734) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34738) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34742) - "WebSocket /v1/chat/ws/4214214213" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 34754) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34758) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34762) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34766) - "WebSocket /v1/chat/ws/4214214213" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 34786) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34790) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34796) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34800) - "WebSocket /v1/chat/ws/4214214213" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 34820) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34824) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34828) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34832) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 36238) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 36244) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 36248) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 36252) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 36296) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 36300) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 36304) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 36316) - "WebSocket /v1/chat/ws/4214214213" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 36356) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 36360) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 36374) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 36378) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 52026) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 52030) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 52034) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 52038) - "WebSocket /v1/chat/ws/4214214213" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 52584) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 52588) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 52594) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 52598) - "WebSocket /v1/chat/ws/4214214213" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 52646) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 52650) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 52654) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 52658) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 52734) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 52740) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 52752) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 52756) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 53978) - "WebSocket /" 403
INFO:uvicorn.error:('127.0.0.1', 53990) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 53996) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 54000) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 54004) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 59604) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 59608) - "WebSocket /" 403
INFO:uvicorn.error:('127.0.0.1', 59612) - "WebSocket /" 403
INFO:uvicorn.error:('127.0.0.1', 59614) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 59618) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 59622) - "WebSocket /" 403
INFO:uvicorn.error:('127.0.0.1', 59624) - "WebSocket /" 403
INFO:uvicorn.error:('127.0.0.1', 59626) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 59786) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 59790) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 59798) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 59800) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 59804) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 59808) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 59814) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 59816) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 59950) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 59956) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 59960) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 59964) - "WebSocket /v1/chat/ws/4214214213" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 60072) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 60084) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 60090) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 60094) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 60156) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 60160) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 60166) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 60170) - "WebSocket /v1/chat/ws/4214214213" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Waiting for application shutdown.
INFO:uvicorn.error:Application shutdown complete.
INFO:uvicorn.error:Finished server process [9586]
INFO:uvicorn.error:Started server process [14122]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:('127.0.0.1', 37198) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 37202) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 37212) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 37218) - "WebSocket /v1/chat/ws/4214214213" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 37682) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 37692) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 37696) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 37700) - "WebSocket /v1/chat/ws/4214214213" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
INFO:uvicorn.error:('127.0.0.1', 37946) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 37950) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 37956) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 37960) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 37988) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 37992) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 38004) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 38008) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 38120) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 38124) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 38130) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 38134) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 38164) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 38168) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 38172) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 38176) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 38200) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 38204) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 38208) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 38212) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 38248) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 38252) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 38258) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 38262) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49018) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49022) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49028) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49032) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49060) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49064) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49070) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49074) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49088) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49094) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49098) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49102) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49112) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49118) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49122) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49126) - "WebSocket /v1/chat/ws/4214214213" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
INFO:uvicorn.error:('127.0.0.1', 49176) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49180) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49184) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49188) - "WebSocket /v1/chat/ws/4214214213" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 49248) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49252) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49256) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49260) - "WebSocket /v1/chat/ws/4214214213" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 49442) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49446) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49452) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49456) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49764) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49768) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49774) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49778) - "WebSocket /v1/chat/ws/4214214213" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 49814) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49818) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49822) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49826) - "WebSocket /v1/chat/ws/4214214213" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 49896) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49900) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49906) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49910) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50080) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50084) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50090) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50094) - "WebSocket /v1/chat/ws/4214214213" [accepted]
INFO:uvicorn.error:('127.0.0.1', 51138) - "WebSocket /v1/chat/ws/1" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 53400) - "WebSocket /v1/chat/ws/1" [accepted]
INFO:uvicorn.error:('127.0.0.1', 53696) - "WebSocket /v1/chat/ws/1" [accepted]
INFO:uvicorn.error:('127.0.0.1', 53826) - "WebSocket /v1/chat/ws/1" [accepted]
INFO:uvicorn.error:('127.0.0.1', 55152) - "WebSocket /v1/chat/ws/1" [accepted]
INFO:uvicorn.error:('127.0.0.1', 55438) - "WebSocket /v1/chat/ws/1" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56190) - "WebSocket /v1/chat/ws/1" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 41288) - "WebSocket /v1/chat/room/4214214213" 403
INFO:uvicorn.error:('127.0.0.1', 41290) - "WebSocket /v1/chat/room/4214214213" 403
INFO:uvicorn.error:('127.0.0.1', 41300) - "WebSocket /v1/chat/room/4214214213" 403
INFO:uvicorn.error:('127.0.0.1', 41334) - "WebSocket /v1/chat/room/4214214213" 403
INFO:uvicorn.error:('127.0.0.1', 41370) - "WebSocket /v1/chat/room/4214214213" 403
INFO:uvicorn.error:('127.0.0.1', 41372) - "WebSocket /v1/chat/room/4214214213" 403
INFO:uvicorn.error:('127.0.0.1', 41394) - "WebSocket /v1/chat/room/4214214213" 403
INFO:uvicorn.error:('127.0.0.1', 41420) - "WebSocket /v1/chat/room/4214214213" 403
INFO:uvicorn.error:('127.0.0.1', 41480) - "WebSocket /v1/chat/room/4214214213" 403
INFO:uvicorn.error:('127.0.0.1', 41610) - "WebSocket /v1/chat/room/4214214213" 403
INFO:uvicorn.error:('127.0.0.1', 41674) - "WebSocket /43221321314214214213" 403
INFO:uvicorn.error:('127.0.0.1', 41678) - "WebSocket /43221321314214214213" 403
INFO:uvicorn.error:('127.0.0.1', 41690) - "WebSocket /43221321314214214213" 403
INFO:uvicorn.error:('127.0.0.1', 41722) - "WebSocket /4322132131" 403
INFO:uvicorn.error:('127.0.0.1', 41726) - "WebSocket /4322132131" 403
INFO:uvicorn.error:('127.0.0.1', 41758) - "WebSocket /4322132131" 403
INFO:uvicorn.error:('127.0.0.1', 41762) - "WebSocket /4322132131" 403
INFO:uvicorn.error:('127.0.0.1', 41778) - "WebSocket /4322132131" 403
INFO:uvicorn.error:('127.0.0.1', 41806) - "WebSocket /4322132131" 403
INFO:uvicorn.error:('127.0.0.1', 41866) - "WebSocket /4322132131" 403
INFO:uvicorn.error:('127.0.0.1', 41992) - "WebSocket /4322132131" 403
INFO:uvicorn.error:('127.0.0.1', 42248) - "WebSocket /4322132131" 403
INFO:uvicorn.error:('127.0.0.1', 42492) - "WebSocket /4322132131" 403
INFO:uvicorn.error:('127.0.0.1', 42696) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 42700) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 42774) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 42778) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 42844) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 42848) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 44352) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 44356) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 46132) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 46136) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 47214) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 47218) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 47244) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 47248) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49358) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49362) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49800) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49804) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 51172) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 51176) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 51580) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 51584) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 52316) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 52320) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56564) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56568) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56990) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56994) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57370) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57374) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57450) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57454) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 58884) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 58888) - "WebSocket /v1/chat/ws/4322132131" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 59270) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 59274) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 60590) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 60594) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33226) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33230) - "WebSocket /v1/chat/ws/4322132131" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 33284) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33292) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33328) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33332) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33434) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33442) - "WebSocket /v1/chat/ws/4322132131" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 33636) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33640) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33686) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33690) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33760) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 33764) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34236) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34240) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34346) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34350) - "WebSocket /v1/chat/ws/4322132131" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 34496) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34500) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 35428) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 35432) - "WebSocket /v1/chat/ws/4322132131" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 35468) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 35472) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 35504) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 35508) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 35578) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 35586) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 37592) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 37596) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41702) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41706) - "WebSocket /v1/chat/ws/4322132131" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 41808) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41812) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41942) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41946) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41984) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41988) - "WebSocket /v1/chat/ws/4322132131" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 42054) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 42058) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 46650) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 46654) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 46808) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 46812) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 47122) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 47126) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 47160) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 47164) - "WebSocket /v1/chat/ws/4322132131" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 47274) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 47278) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 47432) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 47436) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 47600) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 47604) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 47710) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 47714) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 47924) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 47928) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 47970) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 47974) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49124) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49128) - "WebSocket /v1/chat/ws/4322132131" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 49206) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49210) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49284) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49288) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49574) - "WebSocket /v1/chat/ws/4322132131" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49578) - "WebSocket /v1/chat/ws/4322132131" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:Shutting down
INFO:uvicorn.error:Finished server process [14122]
INFO:uvicorn.error:Started server process [32328]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:Started server process [25395]
INFO:uvicorn.error:Waiting for application startup.
INFO:uvicorn.error:Application startup complete.
INFO:uvicorn.error:('127.0.0.1', 34646) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34650) - "WebSocket /v1/chat/ws/421313" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 34838) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 34842) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 36452) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 36456) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 36498) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 36502) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 36596) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 36600) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 37134) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 37138) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 37218) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 37224) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 37272) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 37276) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 39048) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 39052) - "WebSocket /v1/chat/ws/421313" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 39116) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 39120) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40542) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40546) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40576) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40580) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40584) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40588) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40592) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40596) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40600) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40604) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40608) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40612) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40616) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40620) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40624) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40628) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40642) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40646) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40652) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40656) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40660) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40664) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40668) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40672) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40676) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40680) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40684) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40688) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40700) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40704) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40708) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40712) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40716) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40720) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40724) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40728) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40732) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40736) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40740) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40744) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40748) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40752) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40756) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40760) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40764) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40768) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40780) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40784) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40788) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40792) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40796) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40800) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40804) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40808) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40812) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40816) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40820) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40824) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40828) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40832) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40836) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40840) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40844) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40848) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40852) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40856) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40860) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40868) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40876) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40880) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40884) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40888) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40892) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40896) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40900) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40904) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40908) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40912) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40916) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40920) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40924) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40928) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40932) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40936) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40940) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40944) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40956) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40960) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40964) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40968) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40972) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40976) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40980) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40984) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40988) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40992) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 40996) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41000) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41004) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41008) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41012) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41016) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41030) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41034) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41038) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41042) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41046) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41050) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41054) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41058) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41062) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41066) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41070) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41074) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41078) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41082) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41086) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41090) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41094) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41098) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41110) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41114) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41118) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41122) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41126) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41130) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41134) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41138) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41142) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41146) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41150) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41154) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41158) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41162) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41166) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41170) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41182) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41186) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41190) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41194) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41198) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41202) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41206) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41210) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41214) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41218) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41222) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41226) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41230) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41234) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41238) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41242) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41254) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41258) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41262) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41266) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41270) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41274) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41278) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41282) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41286) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41290) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41294) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41298) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41302) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41306) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41310) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41314) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41318) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41322) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41326) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41330) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41342) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41346) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41350) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41354) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41366) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41370) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41374) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41378) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41382) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41386) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41390) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41394) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41398) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41402) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41406) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41414) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41422) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41426) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41430) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41434) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41438) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41442) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41446) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41450) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41454) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41458) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41462) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41466) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41470) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41474) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41478) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41482) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41488) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41492) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41504) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41508) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41512) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41516) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41520) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41524) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41528) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41532) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41536) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41540) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41544) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41548) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41552) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41556) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41560) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41564) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41576) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41580) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41584) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41588) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41592) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41596) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41600) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41604) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41608) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41612) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41616) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41620) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41624) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41628) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41632) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41636) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41640) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41644) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41656) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41660) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41664) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41668) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41672) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41676) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41680) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41684) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41688) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41692) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41696) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41700) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 41704) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 43586) - "WebSocket /v1/chat/ws/421313" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
WARNING:asyncio:socket.send() raised exception.
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
INFO:uvicorn.error:('127.0.0.1', 43632) - "WebSocket /v1/chat/ws/421313" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
INFO:uvicorn.error:('127.0.0.1', 43700) - "WebSocket /v1/chat/ws/421313" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
INFO:uvicorn.error:('127.0.0.1', 43712) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 43724) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 45204) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 45208) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 45220) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 45224) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 45236) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 45240) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 45252) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 45256) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 46064) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 46068) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 46074) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 46078) - "WebSocket /v1/chat/ws/421313" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 723, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.8/asyncio/streams.py", line 517, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 46204) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 46208) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 46222) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 46230) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 48252) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 48256) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 48270) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 48274) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 48602) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 48606) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 48620) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 48624) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 48842) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 48846) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 48858) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 48862) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 48866) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 48870) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 48876) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 48878) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 48882) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 48886) - "WebSocket /v1/chat/ws/421313" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 48992) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 48996) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49008) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49016) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49586) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49590) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49596) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49600) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 49998) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50002) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50092) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50096) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50110) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50114) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50552) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50556) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50562) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50566) - "WebSocket /v1/chat/ws/421313" [accepted]
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 567, in send
    await self.write_frame(True, opcode, data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1083, in write_frame
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 812, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: code = 1001 (going away), no reason
INFO:uvicorn.error:('127.0.0.1', 50634) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50638) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50644) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 50660) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56408) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56412) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56418) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56422) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56604) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56608) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56614) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56618) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56704) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56708) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56714) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56716) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56720) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56724) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56736) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56742) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56746) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56752) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56758) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56760) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56764) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56768) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56770) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56776) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56780) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56784) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56786) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56788) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56792) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 56796) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57060) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57064) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57070) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57074) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57110) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57114) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57158) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57162) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57166) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57170) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57182) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57186) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57190) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57194) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57198) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57202) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57206) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57210) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57214) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57218) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57222) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57226) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57230) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57234) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57238) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57242) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57254) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57258) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57262) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57266) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57270) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57274) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57278) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57282) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57288) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57292) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57296) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57298) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57302) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57306) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57326) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:('127.0.0.1', 57330) - "WebSocket /v1/chat/ws/421313" [accepted]
INFO:uvicorn.error:Shutting down
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
ERROR:uvicorn.error:Exception in ASGI application
Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 827, in transfer_data
    message = await self.read_message()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 895, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 971, in read_data_frame
    frame = await self.read_frame(max_size)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 1047, in read_frame
    frame = await Frame.read(
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/framing.py", line 105, in read
    data = await reader(2)
  File "/usr/lib/python3.8/asyncio/streams.py", line 721, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 157, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 45, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/middleware/debug.py", line 66, in __call__
    return await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/applications.py", line 199, in __call__
    await super().__call__(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/applications.py", line 111, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/errors.py", line 146, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/middleware/cors.py", line 70, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/exceptions.py", line 58, in __call__
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 566, in __call__
    await route.handle(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 283, in handle
    await self.app(scope, receive, send)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/routing.py", line 57, in app
    await func(session)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/fastapi/routing.py", line 247, in app
    await dependant.call(**values)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 163, in websocket_endpoint
    await manager.broadcast(f"Client #{client_id} left the chat")
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/src/chat/v1/chat.py", line 79, in broadcast
    await connection.send_text(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 128, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/starlette/websockets.py", line 68, in send
    await self._send(message)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 218, in asgi_send
    await self.send(data)
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 555, in send
    await self.ensure_open()
  File "/media/lofy/63F9A74F7EFAB349/project/vaysik_/Vaysik-/venv/lib/python3.8/site-packages/websockets/protocol.py", line 803, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: code = 1006 (connection closed abnormally [internal]), no reason
INFO:uvicorn.error:Finished server process [25395]
